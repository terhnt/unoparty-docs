"use strict";(self.webpackChunkunoparty_docs=self.webpackChunkunoparty_docs||[]).push([[826],{3905:function(e,t,n){n.d(t,{Zo:function(){return u},kt:function(){return f}});var a=n(7294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var s=a.createContext({}),c=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},u=function(e){var t=c(e.components);return a.createElement(s.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,r=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=c(n),f=o,m=d["".concat(s,".").concat(f)]||d[f]||p[f]||r;return n?a.createElement(m,i(i({ref:t},u),{},{components:n})):a.createElement(m,i({ref:t},u))}));function f(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var r=n.length,i=new Array(r);i[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:o,i[1]=l;for(var c=2;c<r;c++)i[c]=n[c];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2491:function(e,t,n){n.r(t),n.d(t,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return c},assets:function(){return u},toc:function(){return p},default:function(){return f}});var a=n(7462),o=n(3366),r=(n(7294),n(3905)),i=["components"],l={sidebar_position:5},s="Unowallet-Specific",c={unversionedId:"advanced/unonode/unowallet",id:"advanced/unonode/unowallet",title:"Unowallet-Specific",description:"If you are setting up a Unowallet server, you will next need to create a unowallet.conf.json configuration file. Instructions for doing that are detailed in the Unowallet Configuration File section later in this document. Once creating this file, open up a web browser, and go to the IP address/hostname of the server. You will then be presented to accept your self-signed SSL certificate, and after doing that, should see the Unowallet login screen.",source:"@site/docs/advanced/unonode/unowallet.md",sourceDirName:"advanced/unonode",slug:"/advanced/unonode/unowallet",permalink:"/unoparty-docs/docs/advanced/unonode/unowallet",editUrl:"https://github.com/terhnt/unoparty-docs/tree/main/packages/create-docusaurus/templates/shared/docs/advanced/unonode/unowallet.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"advanced",previous:{title:"Node Administration",permalink:"/unoparty-docs/docs/advanced/unonode/administration"}},u={},p=[{value:"Getting a SSL Certificate\u200b",id:"getting-a-ssl-certificate",level:3},{value:"Monitoring the Server\u200b",id:"monitoring-the-server",level:3},{value:"Creating a configuration file\u200b",id:"creating-a-configuration-file",level:3}],d={toc:p};function f(e){var t=e.components,n=(0,o.Z)(e,i);return(0,r.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"unowallet-specific"},"Unowallet-Specific"),(0,r.kt)("p",null,"If you are setting up a Unowallet server, you will next need to create a ",(0,r.kt)("inlineCode",{parentName:"p"},"unowallet.conf.json")," configuration file. Instructions for doing that are detailed in the ",(0,r.kt)("em",{parentName:"p"},"Unowallet Configuration File")," section later in this document. Once creating this file, open up a web browser, and go to the IP address/hostname of the server. You will then be presented to accept your self-signed SSL certificate, and after doing that, should see the Unowallet login screen."),(0,r.kt)("h3",{id:"getting-a-ssl-certificate"},"Getting a SSL Certificate",(0,r.kt)("a",{parentName:"h3",href:"#getting-a-ssl-certificate"},"\u200b")),(0,r.kt)("p",null,"By default, the system is set up to use a self-signed SSL certificate. If you are hosting your services for others, you should get your own SSL certificate from your DNS registrar so that your users don't see a certificate warning when they visit your site."),(0,r.kt)("p",null,"Once you have that certificate, create a nginx-compatible ",(0,r.kt)("inlineCode",{parentName:"p"},".pem")," file. Copy that ",(0,r.kt)("inlineCode",{parentName:"p"},".pem")," file to ",(0,r.kt)("inlineCode",{parentName:"p"},"federatednode/config/unowallet/ssl/unowallet.pem")," and the cooresponding certificate ",(0,r.kt)("inlineCode",{parentName:"p"},".key")," file to ",(0,r.kt)("inlineCode",{parentName:"p"},"federatednode/config/unowallet/ssl/unowallet.key"),". (Note that there will be a ",(0,r.kt)("inlineCode",{parentName:"p"},"unowallet.key")," and ",(0,r.kt)("inlineCode",{parentName:"p"},"unowallet.pem")," file already there, which are the default, self-signed certificates, and can be safely overridden.) Then, restart the ",(0,r.kt)("inlineCode",{parentName:"p"},"unowallet")," service for the new certificate to take effect."),(0,r.kt)("h3",{id:"monitoring-the-server"},"Monitoring the Server",(0,r.kt)("a",{parentName:"h3",href:"#monitoring-the-server"},"\u200b")),(0,r.kt)("p",null,"To monitor the server, you can use a 3rd-party service such as ",(0,r.kt)("a",{parentName:"p",href:"http://www.pingdom.com"},"Pingdom")," or ",(0,r.kt)("a",{parentName:"p",href:"http://statuscake.com"},"StatusCake"),". The federated node allows these (and any other monitoring service) to query the basic status of the Federated Node via making a HTTP GET call to one of the following URLs:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"/_api/")," (for mainnet)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"/_t_api/")," (for testnet)")),(0,r.kt)("p",null,"If all services are up, a HTTP 200 response with the following data will be returned:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{"unoparty-server": "OK", "unoblock_ver": "1.3.0", "unoparty-server_ver": "9.31.0", "unoblock": "OK",\n"unoblock_check_elapsed": 0.0039348602294921875, "unoparty-server_last_block": {\n"block_hash": "0000000000000000313c4708da5b676f453b41d566832f80809bc4cb141ab2cd", "block_index": 311234,\n"block_time": 1405638212}, "local_online_users": 7, "unoparty-server_check_elapsed": 0.003687143325805664,\n"unoblock_error": null, "unoparty-server_last_message_index": 91865}\n')),(0,r.kt)("p",null,"Note the ",(0,r.kt)("inlineCode",{parentName:"p"},'"unoparty-server": "OK"')," and ",(0,r.kt)("inlineCode",{parentName:"p"},'"unoblock": "OK"')," items."),(0,r.kt)("p",null,"If all services but ",(0,r.kt)("inlineCode",{parentName:"p"},"unoparty-server")," are up, a HTTP 500 response with ",(0,r.kt)("inlineCode",{parentName:"p"},'"unoparty-server": "NOT OK"'),", for instance."),(0,r.kt)("p",null,"If ",(0,r.kt)("inlineCode",{parentName:"p"},"unoblock")," is not working properly, ",(0,r.kt)("inlineCode",{parentName:"p"},"nginx")," will return a HTTP 503 (Gateway unavailable) or 500 response."),(0,r.kt)("p",null,"If ",(0,r.kt)("inlineCode",{parentName:"p"},"nginx")," is not working properly, either a HTTP 5xx response, or no response at all (i.e. timeout) will be returned."),(0,r.kt)("h3",{id:"creating-a-configuration-file"},"Creating a configuration file",(0,r.kt)("a",{parentName:"h3",href:"#creating-a-configuration-file"},"\u200b")),(0,r.kt)("p",null,"Unowallet can be configured via editing the ",(0,r.kt)("inlineCode",{parentName:"p"},"unowallet.conf.json")," file, via issuing the following command:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"sudo docker exec -it unonode_unowallet_1 vim /unowallet/unowallet.conf.json\n")),(0,r.kt)("p",null,"This file will contain a valid JSON-formatted object, containing an a number of possible configuration properties. For example::"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "servers": [ "unoblock1.mydomain.com", "unoblock2.mydomain.com", "unoblock3.mydomain.com" ],\n  "forceTestnet": true,\n  "googleAnalyticsUA": "UA-48454783-2",\n  "googleAnalyticsUA-testnet": "UA-48454783-4",\n  "rollbarAccessToken": "39d23b5a512f4169c98fc922f0d1b121Click to send altcoins to this UNO address ",\n  "disabledFeatures": ["betting"],\n  "restrictedAreas": {\n    "pages/betting.html": ["US"],\n    "pages/openbets.html": ["US"],\n    "pages/matchedbets.html": ["US"],\n    "dividend": ["US"]\n  },\n}\n')),(0,r.kt)("p",null,"Here's a description of the possible fields:"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Required fields:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"servers"),": Unowallet should work out-of-the-box in a scenario where you have a single Unoblock Federated Node that both hosts the static site content, as well as the backend Unoblock API services. However, Unowallet can also be set up to work in MultiAPI mode, where it can query more than one server (to allow for both redundancy and load balancing). To do this, set this ",(0,r.kt)("inlineCode",{parentName:"li"},"servers")," parameter as a list of multiple server URIs. Each URI can have a ",(0,r.kt)("inlineCode",{parentName:"li"},"http://")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"https://")," prefix (we strongly recommend using HTTPS), and the strings must ",(0,r.kt)("em",{parentName:"li"},"not")," end in a slash (just leave it off). If the server hostname does not start with ",(0,r.kt)("inlineCode",{parentName:"li"},"http://")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"https://"),", then ",(0,r.kt)("inlineCode",{parentName:"li"},"https://")," is assumed.")),(0,r.kt)("p",null,"If you just want to use the current server (and don't have a multi-server setup), just specify this as ",(0,r.kt)("inlineCode",{parentName:"p"},"[]")," (empty list).","*"),(0,r.kt)("p",null,(0,r.kt)("strong",{parentName:"p"},"Optional fields:")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"forceTestnet"),": Set to true to always use testnet (not requiring 'testnet' in the FQDN, or the '?testnet=1' parameter in the URL."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"googleAnalyticsUA")," / ",(0,r.kt)("strong",{parentName:"li"},"googleAnalyticsUA-testnet"),": Set to enable google analytics for mainnet/testnet. You must have a google analytics account."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"rollbarAccessToken"),": Set to enable client-side error tracking via rollbar.com. Must have a rollbar account."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"disabledFeatures"),": Set to a list of zero or more features to disable in the UI. Possible features are: ",(0,r.kt)("inlineCode",{parentName:"li"},"betting"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"dividend"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"exchange"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"leaderboard"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"portfolio"),", ",(0,r.kt)("inlineCode",{parentName:"li"},"stats")," and ",(0,r.kt)("inlineCode",{parentName:"li"},"history"),". Normally this can just be ",(0,r.kt)("inlineCode",{parentName:"li"},"[]")," (an empty list) to not disable anything."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("strong",{parentName:"li"},"restrictedAreas"),': Set to an object containing a specific page path as the key (or "dividend" for dividend functionality), and a list of one or more ISO 2-letter country codes as the key value, to allow for country-level blacklisting of pages/features.')),(0,r.kt)("p",null,"Once done, save this file and make sure it exists on all servers you are hosting Unowallet static content on, and restart the ",(0,r.kt)("inlineCode",{parentName:"p"},"unowallet")," service. Now, when you go to your Unowallet site, the server will read in this file immediately after loading the page, and set the list of backend API hosts from it automatically."))}f.isMDXComponent=!0}}]);